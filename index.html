<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Event Cash Form</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .event { border: 1px solid #ccc; padding: 15px; margin-bottom: 15px; border-radius: 8px; }
    .totals { font-weight: bold; margin-top: 10px; }
    button { margin-top: 10px; }
  </style>
</head>
<body>

<h2>Event Cash Collection</h2>
<form id="cashForm" method="POST" action="https://formspree.io/f/xzzaedng">
  <div id="events"></div>
  <button type="button" onclick="addEvent()">+ Add Another Event</button>
  <br><br>
  <input type="submit" value="Submit All Events">
</form>

<script>
let eventCount = 0;

function addEvent() {
  eventCount++;
  const wrapper = document.getElementById("events");

  const div = document.createElement("div");
  div.className = "event";
  div.id = `event-${eventCount}`;
  div.innerHTML = `
    <h3>Event ${eventCount}</h3>
    <label>Nickels: <input type="number" name="nickels-${eventCount}" value="0" oninput="updateTotals(${eventCount})"></label><br>
    <label>Dimes: <input type="number" name="dimes-${eventCount}" value="0" oninput="updateTotals(${eventCount})"></label><br>
    <label>Quarters: <input type="number" name="quarters-${eventCount}" value="0" oninput="updateTotals(${eventCount})"></label><br>
    <label>Loonies: <input type="number" name="loonies-${eventCount}" value="0" oninput="updateTotals(${eventCount})"></label><br>
    <label>Toonies: <input type="number" name="toonies-${eventCount}" value="0" oninput="updateTotals(${eventCount})"></label><br>
    <label>$5: <input type="number" name="fives-${eventCount}" value="0" oninput="updateTotals(${eventCount})"></label><br>
    <label>$10: <input type="number" name="tens-${eventCount}" value="0" oninput="updateTotals(${eventCount})"></label><br>
    <label>$20: <input type="number" name="twenties-${eventCount}" value="0" oninput="updateTotals(${eventCount})"></label><br>
    <label>$50: <input type="number" name="fifties-${eventCount}" value="0" oninput="updateTotals(${eventCount})"></label><br>
    <label>$100: <input type="number" name="hundreds-${eventCount}" value="0" oninput="updateTotals(${eventCount})"></label><br>
    <label>EMT: <input type="number" step="0.01" name="emt-${eventCount}" value="0" oninput="updateTotals(${eventCount})"></label><br>

    <div class="totals">
      Total Cash: $<span id="cashTotal-${eventCount}">0.00</span><br>
      Overall Total (Cash + EMT): $<span id="overallTotal-${eventCount}">0.00</span>
    </div>
  `;

  wrapper.appendChild(div);
}

function updateTotals(id) {
  const values = {
    nickels: 0.05,
    dimes: 0.10,
    quarters: 0.25,
    loonies: 1,
    toonies: 2,
    fives: 5,
    tens: 10,
    twenties: 20,
    fifties: 50,
    hundreds: 100
  };

  let cashTotal = 0;

  for (let key in values) {
    const input = document.querySelector(`[name="${key}-${id}"]`);
    if (input) {
      cashTotal += (parseInt(input.value) || 0) * values[key];
    }
  }

  const emtInput = document.querySelector(`[name="emt-${id}"]`);
  const emt = parseFloat(emtInput.value) || 0;

  document.getElementById(`cashTotal-${id}`).innerText = cashTotal.toFixed(2);
  document.getElementById(`overallTotal-${id}`).innerText = (cashTotal + emt).toFixed(2);
}

// Start with one event
addEvent();
</script>

</body>
</html>
